# CSS层叠

> 问题：
>
> 1. CSS如何解决样式冲突的问题？
>
>  
>
> CSS有三种编写方式：
>
> 1. 外嵌式，使用link标签引入一个css文件。
> 2. 内嵌式，在style标签中编写css代码。
> 3. 内联式，在标签的style属性中设置css样式。
>
> CSS允许对同一个标签的同一个属性设置多个值(例如给某个标签设置多个背景色)，但是该标签只能显示一个属性值，这样就出现了样式冲突的问题，浏览器使用层叠的方式解决样式冲突，即优先级高的属性值覆盖优先值低的属性值。

## CSS样式层叠

> 权重：它是一种相对重要程度的指标，用来说明各个部分在整体的中的相对重要程度，或者优先级。
>
>  
>
> css层叠：浏览器根据`属性`所在选择器的权重值来判断该属性的优先级，从而设置层叠关系，或者说是显示的优先级(谁覆盖谁)。
>
>  
>
> CSS样式优先级规则(多个选择器修饰同一个标签)：
>
> 1. 将`属性样式`所在的选择器进行权重等级分类，高等级权重先比较，高等级权重相同时比较低权重。
> 2. 当权重相同时，看编写顺序，或者说在页面中的位置，后写的优先级高。
> 3. css属性后面添加`!important`时，无论它所在的选择器优先级多低，层叠覆盖，最终显示为该属性样式。

### CSS权重值

> 权重分为4个等级：
>
> 1. 第一等级：代表 内联样式，如 style=""，权值为 1000；
> 2. 第二等级：代表 ID选择器，如 #id="", 权值为 100；
> 3. 第三等级：代表 calss | 伪类 | 属性 选择器，如 .class | :hover,:link,:target | [type], 权值 10；
> 4. 第四等级：代表 标签 | 伪元素 选择器，如 p | ::after, ::before, ::first-inline, ::selection, 权值 1；
> 5. 第五等级：通配符选择器。
> 6. 第六等级：从父元素标签中继承的样式。
>
> 
>
> 注意：
>
> 	1.  通配符选择器和一些组合选择器(后代选择器、子代选择器、相邻选择器)的权重值为`0`，组合选择器本身没有权重值，由其中的选择器来决定权重值。
>  	2.  从父类继承的样式的权重比通配符选择器还小。
>  	3.  对于伪类`:not(selector)`，不参与css权重计算，内部的selector参与，即div:not(.class1)和div.class1的权重值相同。

### CSS如何进行权重比较

> ​		下面代码中有两个css选择器修饰p标签的背景色，最终显示的是绿色，即第二个选择器优先级 > 第一个选择器优先级。
>
> ​	
>
> ​		第一个选择器优先级：第3等级权重值为 11 * 10 = 110，第4等级权重值为 2 * 1 = 2 ，总权重值为 112。
>
> ​		第二个选择器优先级：第1等级权重值为 1 * 100 = 100，第4等级权重值为 3 * 1 = 3，总权重值为103。
>
> 
>
> ​		比较时，同等级权重值进行比较，第2个选择器第1等级权重值为100，为第1个选择器第1等级权重值为0，因此第二个选择器的优先级 > 第一个选择器的优先级，即使第1选择器的总权重值 > 第二选择器的总权重值。
>
>  
>
> `总结：CSS的优先级比的不是总权重，而是从高等级到低等级各个等级下的权重值大小。`

```html
<!-- 代码来讲解CSS权重值比较 -->

<!DOCTYPE html>
<html>
<head>
    <title>CSS 选择器</title>
    <style type="text/css">
        div .a.b.c.d.e.f.g.h.i.j.k p{ background-color: red;  }
        body div #parent p{ background-color: green;  
    </style>
</head>
<body>
    <div >
        <div id="parent" class="a b c d e f g h i j k">
            <p>xxxx</p>
        </div>
    </div>
</body>
</html>
```

### !important

> `!important`权重最高，当属性后添加了`！important`时，就是告诉浏览器不管其它样式的优先级多高，给我忽略显示该属性样式。
>
> ​	
>
> 下面例子中，按照优先级来看，字体颜色应该显示为红色，因为在内联式中设置样式优先级最高，但是在p标签选择器中使用了`!important`，告诉浏览器不考虑css优先级规则了，直接将字体显示为红色。
>
>  
>
> `!important`缺点：
>
> 1. 它打破了css优先级规则，不利于后期样式的修改。

```html
<!DOCTYPE html>
<html>
<head>
    <title>CSS 选择器</title>
    <style type="text/css">
        p {color: orange !import;}
    </style>
</head>
<body>
	<p style="color:red">xxxx</p>
</body>
</html>
```

### 属性值冲突引发CSS优先级判断

> `属性值冲突`：在多个地方给同一种类标签的同一属性设置不同的属性值，造成属性值的冲突，此时浏览器会根据css优先级规则来决定最终属性值。
>
> ​	
>
> 下面代码没有发生属性值冲突，因此不会有css优先级比较，所有的CSS优先级比较是针对属性值，而不是标签，多个选择器修饰同一个标签并不会发生CSS优先级比较，因为没有出现属性值冲突的问题。

```html
<!DOCTYPE html>
<html>
<head>
    <title>CSS 选择器</title>
    <style type="text/css">
        p {color: orange;}
        p1{ background-color:red;}
      
    </style>
</head>
<body>
	<p id="p1">xxxx</p>
</body>
</html>
```