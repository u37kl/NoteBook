网络中获取图片的一个网站，用来开发网站时没有图时，可以使用这个接口https://picsum.photos/id/1/300/300

 

懒加载



浏览器在加载网页是，遇到带有src属性的img、带有href的link、带有src的script，和带有src的iframe的标签时，会加载这些标签对应的问题，其中有些文件没有被使用到，但还是被浏览器加载出来，造成的流量的浪费、和页面打开速度下降。

 

图片懒加载实现方式：

1. 既然带有src属性时，浏览器才会加载图片，因此编写img标签时不带src。src通过js添加。
2. 使用data-*方式添加src属性。

 

在使用懒加载时，如何判断一个图片应该加载？当图片移动进入浏览器视觉视口中时，将会被加载。

如何判断图片进入视觉视口？

1. 使用图片的offsetTop < 视觉视口高度+页面滚动距离(content.scrollTop)
2. 元素.getBoundRect()



## 相册技术点

> 相册页面布局：
>
> 1. 图片适应外层包裹元素，设置width:100%
> 2. 给外层元素设置圆角无效果，外层元素overflow:hidden，裁剪超出部分。

> 实现懒加载图片(只有出现在屏幕中的图片才可以加载)：
>
> 1. 网页图片标签有JS来生成，并且生成出来的图片元素没有src属性，防止直接加载图片。
> 2. 使用JS判断每个图片元素是否出现在屏幕中，给出现在屏幕中的img元素设置src属性。
> 3. 给每个img元素添加加载图，通过backgroud-image属性设置，设置opacity为0，并且给每个img元素添加onload和onerror事件回调函数，当onload函数或者onerror函数调用时，opacity=1，onerror函数中给img元素设置加载失败图片。
> 4. 给每个li元素设置loading属性，默认值为0，当li出现在屏幕中时，loading属性设为1，防止加载完图片的img标签重复加载。

> 上拉加载：
>
> 1. 将上拉加载元素放在承载图片的div中(通过移动它来实现滚动)，开启定位，bottom为负的上拉加载元素的高度。
> 2. 滚动区域上拉到边界时，上拉加载元素scale=0，滚动区域再上移上拉加载元素高度时scale=1，实现上拉时上拉加载内容的缩放功能。
> 3. scale最大为1，当scale>=1并且松手时，加载下一页元素。
> 4. 松手后加载新图片，但还是懒加载样式

> 点击图片放大时，从图片的位置放大到全屏效果实现：
>
> 1. transform-orgin属性设置图片变换的起点。
> 2. transition：transform 0.5s; 不能使用all，出现错误效果，例如从上一张放大的图片位置作为起点变化。

> 新增元素绑定事件方式(上拉加载出来的图片无法点击放大)：
>
> 1. 方式1，创建完元素后，直接绑定事件。
> 2. 方式2，使用事件委派。

### 相册技术效果

> 1. 网页为响应式，手机显示2张，平板显示3张，电脑显示4张
> 2. 图片要有加载图、加载失败的图片。
> 3. 图片加载完必须慢慢显示出来。
> 4. 图片需要懒加载，即元素出现在屏幕上才能加载。
> 5. 相册滑动要有、边界回弹效果、惯性滚动效果。
> 6. 相册要有上拉加载功能，上拉加载文字随着拉去逐渐放大到一定程度。
> 7. 要有滚动条，并且滚动条要随着内容页面的增加，而变化大小和位置。
> 8. 点击图片，要求放大查看图片的效果。



# iOS手势

> 
>
> Gesturestart；大于一根手指触摸屏幕
>
> gesturechange：大于一根手指滑动
>
> gestureend：在gesturestart事件触发后，屏幕少于两个手指触摸
>
>  
>
> 注意：
>
> 1. 这三个手势只能在iOS上使用。
> 2. 触发gesturestart和gesturechange事件无需两个手指都在元素上，只有一个手指按在元素上并且其它手指放在屏幕上的任何位置就行，触发gesturechange事件只有多个手指的其中任意一个手指滑动就能触发。
> 3. gestureend事件的触发条件：只要屏幕上少于两根手指或者元素上没有任何手指。
>
> e.scale：手势滑动时，元素的缩放比例，e .scale = ` gesturechage事件触发时，两个手指之间的距离` / `gesturestart事件触发时，两个手指之间的距离`。
>
>  e.rotation：手势滑动时，元素的旋转角度，e.rotation = ` gesturechage事件触发时，两个手指之间的连线 与 gesturestart事件触发时，两个手指之间的连线所成的夹角`。
>
>  

> 手势模拟：由于andriod没有缩放和旋转手势事件，上面三个手势很少使用，大部分使用模拟手势。





